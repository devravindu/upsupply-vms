{% extends 'management/base.html' %}

{% block header_title %}Vendor Directory{% endblock %}

{% block content %}
<div class="mb-4 flex items-center justify-between gap-3">
    <div>
        <h1 class="text-xl font-bold text-gray-800 md:text-2xl">All Vendors</h1>
        <p class="text-xs text-gray-500 md:text-sm">Manage your supply chain partners</p>
    </div>
    <a href="{% url 'vendor_create' %}" class="inline-flex items-center rounded-md bg-blue-600 px-3 py-2 text-sm font-medium text-white shadow-sm transition hover:bg-blue-700">
        <svg class="mr-1 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
        </svg>
        Add
    </a>
</div>

<div class="space-y-3 md:hidden">
    {% for vendor in vendors %}
    <article class="rounded-xl border border-gray-200 bg-white p-4 shadow-sm">
        <div class="mb-3 flex items-start justify-between">
            <div class="flex items-center gap-3">
                <div class="flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 text-sm font-semibold text-slate-600">
                    {{ vendor.name|slice:":2"|upper }}
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-900">{{ vendor.name }}</h3>
                    <p class="text-xs text-gray-500">{{ vendor.vendor_type|title }}</p>
                </div>
            </div>
            <span class="inline-flex rounded-full px-2.5 py-1 text-xs font-semibold {% if vendor.risk_tier == 'low' %}bg-green-100 text-green-700{% elif vendor.risk_tier == 'high' %}bg-red-100 text-red-700{% else %}bg-yellow-100 text-yellow-700{% endif %}">
                {{ vendor.get_risk_tier_display }}
            </span>
        </div>

        <div class="space-y-2 text-sm text-gray-600">
            <div class="flex items-center justify-between">
                <span>Status</span>
                <span class="font-medium">{{ vendor.get_status_display }}</span>
            </div>
            <div class="flex items-center justify-between">
                <span>Active Contract Value</span>
                <span class="font-semibold text-slate-900">${{ vendor.active_contract_value|default:0|floatformat:2 }}</span>
            </div>
        </div>

        <a href="{% url 'vendor_detail' vendor.pk %}" class="mt-4 inline-flex text-sm font-medium text-blue-600">View profile →</a>
    </article>
    {% empty %}
    <div class="rounded-xl border border-dashed border-gray-300 bg-white p-8 text-center text-sm text-gray-500">No vendors found.</div>
    {% endfor %}
</div>

<div class="hidden overflow-hidden rounded-xl border border-gray-200 bg-white md:block">
    <div class="divide-y divide-gray-200">
        {% for vendor in vendors %}
        <div class="grid grid-cols-12 items-center gap-4 px-5 py-4">
            <div class="col-span-4 flex items-center gap-3">
                <div class="flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 text-sm font-semibold text-slate-600">{{ vendor.name|slice:":2"|upper }}</div>
                <div>
                    <p class="font-semibold text-gray-900">{{ vendor.name }}</p>
                    <p class="text-xs text-gray-500">{{ vendor.vendor_type|title }}</p>
                </div>
            </div>
            <div class="col-span-2">
                <span class="inline-flex rounded-full px-3 py-1 text-xs font-semibold {% if vendor.risk_tier == 'low' %}bg-green-100 text-green-700{% elif vendor.risk_tier == 'high' %}bg-red-100 text-red-700{% else %}bg-yellow-100 text-yellow-700{% endif %}">{{ vendor.get_risk_tier_display }}</span>
            </div>
            <div class="col-span-2 text-sm text-gray-600">{{ vendor.get_status_display }}</div>
            <div class="col-span-2 text-sm font-semibold text-gray-900">${{ vendor.active_contract_value|default:0|floatformat:2 }}</div>
            <div class="col-span-2 text-right">
                <a href="{% url 'vendor_detail' vendor.pk %}" class="text-sm font-medium text-blue-600">View profile →</a>
            </div>
        </div>
        {% empty %}
        <div class="p-8 text-center text-sm text-gray-500">No vendors found.</div>
        {% endfor %}
    </div>
</div>
{% endblock %}
